<!DOCTYPE html>
<html>
<head>
  <title>Test POST Pedido</title>
</head>
<body>
  <h2>Enviar pedido a API</h2>
  <button onclick="enviarPedido()">Enviar Pedido</button>
  <pre id="respuesta"></pre>

  <script>
    async function enviarPedido() {
      const data = {
        encabezado: {
          id_transaccion: "TX123456",
          id_dispositivo: "DISP001",
          cod_cliente: "CL001",
          nro_lista: "01",
          cond_vta: "CONT",
          cod_vendedor: "VEN001",
          estado: "ACT",
          habitual: "NO",
          fecha_ing: "2021-04-30 00:00:00.000",
          fecha_ped: "30/04/2021",
          nro_pedido_dispositivo: 1001,
          porc_desc: 10.0,
          total_pedi: 2500.0,
          leyenda_1: "Pedido desde app"
        },
        renglones: [
          {
            id_transaccion: "TX123456",
            id_dispositivo: "DISP001",
            cod_articu: "ART001",
            cantidad: 2,
            n_renglon: 1,
            estado: "ACT",
            nro_pedido_dispositivo: 1001,
            porc_desc: 5.0,
            precio: 1000.0,
            fecha_entrega: "2021-04-30 00:00:00.000",
            desc_adic: "Entrega urgente"
          }
        ]
      };

      try {
        const res = await fetch("http://localhost:5000/pedidos", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        const texto = await res.text();
        document.getElementById("respuesta").textContent = texto;
      } catch (err) {
        document.getElementById("respuesta").textContent = "‚ùå Error: " + err.message;
      }
    }
  </script>
</body>
</html>
